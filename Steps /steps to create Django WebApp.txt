docker-compose exec web python manage.py startapp accounts

## ADD in config/setting.py ->  INSTALLED_APPS = [ ... 'accounts', ]

## ADD in accounts/models.py -> 
from django.contrib.auth.models import AbstractUser
class CustomUser(AbstractUser):
    pass

add in config/setting.py ->
## accounts config
AUTH_USER_MODEL = 'accounts.CustomUser'

## ADD in config/setting.py -> from environs import Env
pipenv install environs
pipenv requirements > requirements.txt
docker-compose up
git rm .env --cached


## CREATE in accounts/ -> forms.py 

## ADD these in accounts/forms.py
from django.contrib.auth.forms import UserCreationForm, UserChangeForm
from django.contrib.auth import get_user_model
class CustomUserCreationForm(UserCreationForm):
    class Meta:
        model = get_user_model()
        fields = ('email', 'username',)
class CustomUserChangeForm(UserChangeForm):
    class Meta:
        model = get_user_model()
        fields = ('email', 'username',)


## ADD these in accounts/admin.py
from django.contrib import admin
from django.contrib.auth.admin import UserAdmin
from .models import CustomUser
from .forms import CustomUserCreationForm, CustomUserChangeForm
@admin.register(CustomUser)
class CustomUserAdmin(UserAdmin):
    model = CustomUser
    add_form = CustomUserCreationForm
    form = CustomUserChangeForm
    list_display = ('email', 'username')
# @admin.register(CustomUser)
# Instead of :
# admin.site.register(CustomUser, CustomUserAdmin)

## Migrate
docker-compose exec web python manage.py makemigrations
docker-compose exec web python manage.py migrate

## Create Super User
docker-compose exec web python manage.py createsuperuser

## Check
http://0.0.0.0:8000/admin





